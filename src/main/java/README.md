## CHAPTER 03: 입출금 내역 분석기 확장

### 3.2 목표
- 현재 응용프로그램의 기능은 제한적이다. (CH02)
- 다양한 종류의 입출금 내역을 검색하고, 여러 포맷을 지원하고, 처리하며 텍스트, HTML등의 형식으로 리포트를 멋지게 내보내려면 무엇이 필요할까?
- 코드베이스에 유연성을 추가하고 유지보수를 개선하는데 도움되는 **OCP 원칙**을 배운다.
- 인터페이스 언제 사용하면 좋을지에 대한 일반 가이드라인 제시
- 높은 결합도를 피하는 기법을 배운다.
- 예외처리방법을 배운다.: 언제 API 에 예외를 포함하고 안 포함할지
- 빌드 도구: 메이븐, 그레이들 도구를 이용해 자바프로젝트를 시스템적으로 빌드한다.


### 3.3 요구사항
- 현재는 특정 월(month), 범주(category)의 합계만 조회하도록 기능 제한이 되어있다.
- 2가지 새로운 기능을 추가해주세요.
  - 특정 입출금 내역을 검색할 수 있는 기능. 예) 주어진 날짜 범위, 특정 범주의 입출금 내역 얻기
  - 검색 결과의 요약 통계를 텍스트, HTML 다양한 형식으로 만들기.

### 3.4 개방/폐쇄 원칙 (OCP)
- 중복코드는 소프트웨어를 불안정하게 만드는데, 특히 요구사항이 자주 바뀔수록 영향이 커진다.
- 예: 
  - 반복하면서 수행하는 로직을 바꾸려면 여러 장소에서 이를 모두 찾아 바꿔줘야한다.
    - 이런 접근 방법으로는 복잡한 요구사항을 만족시키기 어렵다.
    - 거래 내역의 속성을 조합할 수록 코드가 복잡해진다.
    - 반복로직 + 비즈니스로직이 결합되어 분리하기 어렵다.
- OCP를 사용하면 직접 코드를 바꾸지 않고 해당 메서드, 클래스의 동작을 바꿀 수 있다.

### 3.5 인터페이스 문제
- 작은 인터페이스를 권장한다.
  - 한 인터페이스에 너무 많은 메서드를 정의해두게 되면 이를 구현하는 모든 클래스들은 이 메서드에 대해서 모두 구현을 해야만한다.
  이렇게 되면, 인터페이스를 한번 바꾸면 이를 구현하고 있는 코드도 모두 다 변경을 해야한다. 
  - 인터페이스가 도메인 객체의 특정 접근자에 종속되는 문제가 생긴다.
- 지나친 세밀함: 인터페이스가 작을수록 좋은것은 아니다. 기능이 너무 분산되어서 필요한 기능을 찾기가 어려워질수있다.

### 3.6 명시적 API vs 암묵적 API
- 코드베이스에 불필요한 추상화를 추가해 일을 복잡하게 만들필요가 없다.
- 도메인 클래스 vs 원시값: 원시값을 반환하는것은 일반적으로 좋은 방법이 아니다. 원시값으로는 다양한 결과를 반환할 수 없어 유연성이 떨어진다.
- double 이 가질 수 있는 비트 수는 한정적이므로 소숫점을 저장할 때 자릿수에 제약을 받는다. 대신 java.math.BigDecimal을 사용하면
소숫점 자릿수에 제한이 없다. 하지만 BigDecimal을 사용하면 CPU와 메모리의 부담이 커진다.


### 3.7 다양한 형식으로 내보내기
- interface 에서 반환값으로 void를 나는 사용했는데 이렇게 하면 어떤 정보도 줄수가 없다;
- 내보낼때 어떤타입인지 예측이 불가능.

### 3.8 예외처리
- 문제 예측
  - 데이터를 적절하게 파싱하지 못한다면?
  - 입춞금 내역을 포함하는 csv파일을 읽을 수 없다면?
  - 응용프로그램을 실행하는 저장공간이 부족하면?
- 예외를 사용해야하는 이유
  - 고전적 프로그래밍에서 if문을 추가했으나 단점이 많다.


### 3.9 빌드 도구 사용
- 컴파일(javac) , dependency 관리, 패키징, 테스트, 배포 (LifeCycle).
- 스크립트를 만들고 모든 명령어를 자동화 -> 이런 명령어를 반복실행하지 않아도 된다.

## 배운점
- java.util.DoubleSummaryStatistics 의 존재
  - 개수, 최소값, 최대값, 합계 및 평균과 같은 통계를 수집해주는 객체 ..! 이런게 있군;
- stream.summaryStatistics()의 존재
  - 스트림으로 위 통계를 낼수 있음
  - 스트림의 중간연산에서 mapToDouble 등 wrapper로 감싼후 결과를 내보내기도;
- Functional Interface 의 활용방법 (BankProcessor 전체 변경됨)
- 다행이 Export쪽은 인터페이스로 관리하고 있었어서 큰 변화 없음!!
